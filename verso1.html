<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Virgilio, Aeneis - Liber I (Versos 1-11)</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=IM+Fell+English:ital@0;1&display=swap" rel="stylesheet">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* --- ESTILOS MEDIEVALES PERSONALIZADOS --- */

        /* Fondo de la página, simulando una mesa de madera oscura */
        body {
            background-color: #3d2c1d;
            background-image: url('https://www.transparenttextures.com/patterns/wood-pattern.png');
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
            padding: 2rem 1rem;
            color: #4a3a2a;
            font-family: 'Helvetica Neue', Arial, sans-serif;
        }

        /* Contenedor principal que simula la hoja del libro */
        .book-page {
            background-color: #fdf5e6; /* Color pergamino */
            background-image: url('https://www.transparenttextures.com/patterns/old-wall.png');
            border: 1px solid #c9b79c;
            box-shadow: 0 8px 25px rgba(0,0,0,0.5);
            max-width: 1200px;
            width: 100%;
            border-radius: 4px;
        }

        /* Tipografía manuscrita para el texto principal y de contexto */
        .textum-classicum, #context-content {
            font-family: 'IM Fell English', 'Georgia', serif;
            font-size: 1.25rem;
            line-height: 1.8;
            color: #5c4d3c;
        }

        /* Estilo de los títulos */
        h1, h2, h3 {
            font-family: 'IM Fell English', 'Georgia', serif;
            font-weight: bold;
            color: #6d4c35;
        }
        #main-title { font-size: 3.5rem; }
        #subtitle { font-size: 1.75rem; }
        #context-title, #text-title, #analysis-title { font-size: 1.5rem; }

        /* Estilo para las palabras clickables */
        .verbum {
            cursor: pointer;
            transition: color .2s ease-in-out;
            border-bottom: 1px dotted transparent;
        }
        .verbum:hover {
            background-color: rgba(181, 152, 114, 0.2);
            border-bottom: 1px dotted #8c785c;
        }
        .activus {
            background-color: rgba(181, 152, 114, 0.4) !important;
            color: #3d2c1d !important;
            font-weight: bold;
        }

        /* Números de los versos */
        .verse-number {
            color: #9a3412;
            font-weight: bold;
        }

        /* Línea divisoria ornamental */
        .divider {
            border: 0;
            height: 1px;
            background-image: linear-gradient(to right, rgba(109, 76, 53, 0), rgba(109, 76, 53, 0.75), rgba(109, 76, 53, 0));
            margin: 2rem 0;
        }

        /* --- ESTILOS PARA EL SELECTOR DE IDIOMA --- */
        #language-switcher { display: flex; gap: 0.5rem; padding-bottom: 1rem; }
        .lang-btn { 
            padding: 0.5rem; border: 1px solid #d1c4b0; background-color: #f5eadb; color: #6d4c35;
            border-radius: 0.25rem; cursor: pointer; font-weight: 600; transition: all 0.2s; 
            font-size: 0.875rem; font-family: 'Helvetica Neue', Arial, sans-serif;
        }
        .lang-btn:hover { background-color: #e9dcc9; }
        .lang-btn.active-lang { background-color: #6d4c35; color: #fdf5e6; border-color: #6d4c35; }

        /* --- ESTILOS PARA MENÚS DESPLEGABLES --- */
        details > summary { list-style: none; }
        details > summary::-webkit-details-marker { display: none; }
        details > summary::before { content: '▶'; margin-right: 0.5rem; font-size: 0.8em; transition: transform 0.2s; color: #8c785c;}
        details[open] > summary { color: #3d2c1d; }
        details[open] > summary::before { transform: rotate(90deg); }
        details .details-content { padding-left: 1.2rem; margin-top: 0.5rem; border-left: 1px solid #d1c4b0; }
        #marginalia-contentus .text-2xl { color: #6d4c35; }
        #marginalia-contentus .text-lg { color: #8c785c; }
        #marginalia-contentus .text-sm { color: #5c4d3c; }

        /* --- LAYOUT RESPONSIVO --- */

        /* 1. ESTILOS POR DEFECTO (PANTALLAS VERTICALES / MÓVILES) */
        .main-layout { padding: 1.5rem; }
        #marginalia-sinistra { 
            margin-top: 2rem;
            padding-top: 1.5rem;
            border-top: 1px solid #d1c4b0;
        }

        /* 2. ESTILOS PARA PANTALLAS HORIZONTALES / ORDENADOR (a partir de 1024px de ancho) */
        @media (min-width: 1024px) {
            .main-layout {
                display: grid;
                grid-template-columns: 4fr 1fr;
                gap: 2rem;
                padding: 2.5rem 3rem;
            }
            #marginalia-sinistra {
                margin-top: 0;
                padding-top: 0;
                border-top: none;
                position: sticky;
                top: 2.5rem;
                height: calc(100vh - 5rem);
                border-left: 1px solid #d1c4b0;
                padding-left: 2rem;
                overflow-y: auto;
            }
        }
    </style>
</head>
<body>
    <div class="book-page">
        <div class="main-layout">
            <div id="textum-principale">
                <header>
                    <div id="language-switcher" class="mb-4">
                        <button data-lang="es" class="lang-btn active-lang">Español</button>
                        <button data-lang="en" class="lang-btn">English</button>
                        <button data-lang="zh" class="lang-btn">中文 (繁體)</button>
                    </div>
                    <p id="author" class="text-sm font-semibold uppercase tracking-wider text-[#8c785c]"></p>
                    <h1 id="main-title" class="mb-2"></h1>
                    <h2 id="subtitle" class=""></h2>
                </header>
                <hr class="divider">
                <section id="introductio" class="mb-10">
                    <h3 id="context-title" class="mb-2"></h3>
                    <p id="context-content" class="text-justify leading-relaxed"></p>
                </section>
                <section id="text-et-analisi">
                    <h3 id="text-title" class="mb-4"></h3>
                    <div id="paragrafus-contentus" class="textum-classicum">
                        </div>
                </section>

                <hr class="divider my-10">

                <div class="flex justify-between items-center mb-6">
                    <a href="index.html" class="flex-1 mr-4 lang-btn text-center hover:bg-amber-800 hover:text-white transition">
                        <span class="font-['IM_Fell_English']">&laquo; Volver al Índice</span>
                    </a>
                    <a href="verso2.html" class="flex-1 ml-4 lang-btn text-center hover:bg-teal-800 hover:text-white transition">
                        <span class="font-['IM_Fell_English']">Siguientes Versos &raquo;</span>
                    </a>
                </div>

            </div>
            <aside id="marginalia-sinistra">
                <h3 id="analysis-title" class="mb-4">Análisis</h3>
                <div id="marginalia-contentus">
                    <p class="text-[#6d4c35] font-['IM_Fell_English']">Haz clic en una palabra en el texto para ver su análisis.</p>
                </div>
            </aside>
        </div>
        <footer class="text-center py-4 border-t border-[#d1c4b0]">
            <p id="footer-text" class="text-sm text-[#8c785c]"></p>
        </footer>
    </div>

    <script>
        const corpus = {
            "titulus_principalis": "Aeneis",
            "titulus_secundarius": { "es": "Liber Primus: Proemio", "en": "Book One: The Proem", "zh": "卷一: 序言" },
            "auctor": "Publius Vergilius Maro",
            "introductio": {
                "es": { "titulus": "Contexto del Libro Primero", "contentus": "El primer libro de la Eneida, la gran epopeya de Virgilio, comienza con el proemio, donde el poeta invoca a la Musa y declara el tema de su obra: las guerras y el héroe Eneas. Tras la caída de Troya, Eneas navega hacia Italia, un viaje obstaculizado por la ira de la diosa Juno. El libro narra la tempestad provocada por Juno que desvía a los troyanos a las costas de Cartago, la llegada de Eneas, y su encuentro con la reina Dido, con quien forjará una relación trágica." },
                "en": { "titulus": "Context of Book One", "contentus": "The first book of the Aeneid, Virgil's great epic, begins with the proem, where the poet invokes the Muse and declares the theme of his work: wars and the hero Aeneas. After the fall of Troy, Aeneas sails towards Italy, a journey hindered by the wrath of the goddess Juno. The book narrates the storm provoked by Juno that diverts the Trojans to the shores of Carthage, the arrival of Aeneas, and his meeting with Queen Dido, with whom he will forge a tragic relationship." },
                "zh": { "titulus": "第一卷背景", "contentus": "維吉爾的偉大史詩《埃涅阿斯紀》第一卷以序言開篇，詩人在此處呼喚繆斯並宣告其作品主題：戰爭和英雄埃涅阿斯。特洛伊陷落後，埃涅阿斯乘船前往義大利，其旅程因女神朱諾的憤怒而受阻。本卷敘述了朱諾引發的暴風雨，將特洛伊人引向迦太基海岸，埃涅阿斯的到來，以及他與狄多女王的相遇，並將與她建立一段悲劇性的關係。" }
            },
            "textus": {
                "capitula": [
                    { "numerus": 1, "orationes": [ { "original_lat": "Arma virumque cano, Troiae qui primus ab oris", "translationes": { "es": "Canto a las armas y al hombre, quien primero desde las costas de Troya", "en": "I sing of arms and the man, who first from the shores of Troy", "zh": "我歌唱武器和那個人，他首先從特洛伊的海岸" }, "verba": [ {"textus": "Arma", "lemma": "arma", "morphologia": "n., pl., acc.", "syntaxis": "Objeto directo de cano", "translatio": {"es": "armas", "en": "arms", "zh": "武器"}}, {"textus": "virumque", "lemma": "vir", "morphologia": "m., sg., acc. (+ -que)", "syntaxis": "Objeto directo de cano", "translatio": {"es": "y al hombre", "en": "and the man", "zh": "和那個人"}}, {"textus": "cano,", "lemma": "cano", "morphologia": "v., 1ª pers., sg., pres., ind.", "syntaxis": "Verbo principal", "translatio": {"es": "canto", "en": "I sing", "zh": "我歌唱"}}, {"textus": "Troiae", "lemma": "Troia", "morphologia": "f., sg., gen.", "syntaxis": "Complemento del nombre 'oris'", "translatio": {"es": "de Troya", "en": "of Troy", "zh": "的特洛伊"}}, {"textus": "qui", "lemma": "qui", "morphologia": "pron. rel., m., sg., nom.", "syntaxis": "Sujeto de venit", "translatio": {"es": "quien", "en": "who", "zh": "他"}}, {"textus": "primus", "lemma": "primus", "morphologia": "adj., m., sg., nom.", "syntaxis": "Predicativo del sujeto", "translatio": {"es": "el primero", "en": "first", "zh": "首先"}}, {"textus": "ab", "lemma": "ab", "morphologia": "prep. + abl.", "syntaxis": "Preposición con 'oris'", "translatio": {"es": "desde", "en": "from", "zh": "從"}}, {"textus": "oris", "lemma": "ora", "morphologia": "f., pl., abl.", "syntaxis": "Complemento circunstancial de lugar (origen)", "translatio": {"es": "costas", "en": "shores", "zh": "海岸"}} ] } ] },
                    { "numerus": 2, "orationes": [ { "original_lat": "Italiam, fato profugus, Laviniaque venit", "translationes": { "es": "llegó a Italia, prófugo por el hado, y a las costas lavinias", "en": "to Italy, an exile by fate, he came and to the Lavinian shores", "zh": "他因命運而流亡，來到義大利和拉維尼亞的海岸" }, "verba": [ {"textus": "Italiam,", "lemma": "Italia", "morphologia": "f., sg., acc.", "syntaxis": "Complemento circunstancial de lugar (dirección)", "translatio": {"es": "a Italia", "en": "to Italy", "zh": "到義大利"}}, {"textus": "fato", "lemma": "fatum", "morphologia": "n., sg., abl.", "syntaxis": "Ablativo de causa", "translatio": {"es": "por el destino", "en": "by fate", "zh": "因命運"}}, {"textus": "profugus,", "lemma": "profugus", "morphologia": "adj., m., sg., nom.", "syntaxis": "Aposición a 'qui'", "translatio": {"es": "prófugo", "en": "an exile", "zh": "流亡者"}}, {"textus": "Laviniaque", "lemma": "Lavinius", "morphologia": "adj., n., pl., acc. (+ -que)", "syntaxis": "Adjetivo que modifica a 'litora' (v. 3)", "translatio": {"es": "y a las Lavinias", "en": "and to the Lavinian", "zh": "和拉維尼亞的"}}, {"textus": "venit", "lemma": "venio", "morphologia": "v., 3ª pers., sg., perf., ind.", "syntaxis": "Verbo principal de la oración de relativo", "translatio": {"es": "llegó", "en": "he came", "zh": "來了"}} ] } ] },
                    { "numerus": 3, "orationes": [ { "original_lat": "litora, multum ille et terris iactatus et alto", "translationes": { "es": "él, zarandeado mucho en tierras y en el mar profundo,", "en": "shores, he, much tossed on lands and on the deep,", "zh": "海岸，他曾在陸地和深海中被猛烈地拋擲，" }, "verba": [ {"textus": "litora,", "lemma": "litus", "morphologia": "n., pl., acc.", "syntaxis": "Complemento circunstancial de lugar (dirección)", "translatio": {"es": "a las costas", "en": "to the shores", "zh": "到海岸"}}, {"textus": "multum", "lemma": "multum", "morphologia": "adv.", "syntaxis": "Adverbio que modifica a 'iactatus'", "translatio": {"es": "mucho", "en": "much", "zh": "猛烈地"}}, {"textus": "ille", "lemma": "ille", "morphologia": "pron., m., sg., nom.", "syntaxis": "Sujeto enfático (refiere a 'qui')", "translatio": {"es": "él", "en": "he", "zh": "他"}}, {"textus": "et", "lemma": "et", "morphologia": "conj.", "syntaxis": "Conjunción copulativa", "translatio": {"es": "tanto", "en": "both", "zh": "和"}}, {"textus": "terris", "lemma": "terra", "morphologia": "f., pl., abl.", "syntaxis": "Ablativo de lugar 'en donde'", "translatio": {"es": "en tierras", "en": "on lands", "zh": "在陸地"}}, {"textus": "iactatus", "lemma": "iacto", "morphologia": "part., m., sg., nom., pf.", "syntaxis": "Participio concertado con 'ille'", "translatio": {"es": "zarandeado", "en": "tossed", "zh": "被拋擲"}}, {"textus": "et", "lemma": "et", "morphologia": "conj.", "syntaxis": "Conjunción copulativa", "translatio": {"es": "como", "en": "and", "zh": "和"}}, {"textus": "alto", "lemma": "altum", "morphologia": "n., sg., abl.", "syntaxis": "Ablativo de lugar 'en donde'", "translatio": {"es": "en el profundo (mar)", "en": "on the deep", "zh": "在深海"}} ] } ] },
                    { "numerus": 4, "orationes": [ { "original_lat": "vi superum saevae memorem Iunonis ob iram;", "translationes": { "es": "por la fuerza de los dioses, por la memoriosa ira de la cruel Juno;", "en": "by the force of the gods above, on account of the mindful wrath of cruel Juno;", "zh": "因為眾神的力量，為了朱諾那殘酷而念念不忘的憤怒；" }, "verba": [ {"textus": "vi", "lemma": "vis", "morphologia": "f., sg., abl.", "syntaxis": "Ablativo de causa", "translatio": {"es": "por la fuerza", "en": "by the force", "zh": "因為力量"}}, {"textus": "superum", "lemma": "superus", "morphologia": "adj., m., pl., gen.", "syntaxis": "Genitivo (forma síncopada de superorum)", "translatio": {"es": "de los de arriba", "en": "of the (gods) above", "zh": "的眾神"}}, {"textus": "saevae", "lemma": "saevus", "morphologia": "adj., f., sg., gen.", "syntaxis": "Adjetivo que modifica a 'Iunonis'", "translatio": {"es": "de la cruel", "en": "of cruel", "zh": "殘酷的"}}, {"textus": "memorem", "lemma": "memor", "morphologia": "adj., f., sg., acc.", "syntaxis": "Adjetivo que modifica a 'iram'", "translatio": {"es": "memoriosa", "en": "mindful", "zh": "念念不忘的"}}, {"textus": "Iunonis", "lemma": "Iuno", "morphologia": "f., sg., gen.", "syntaxis": "Complemento del nombre 'iram'", "translatio": {"es": "de Juno", "en": "of Juno", "zh": "的朱諾"}}, {"textus": "ob", "lemma": "ob", "morphologia": "prep. + acc.", "syntaxis": "Preposición con 'iram'", "translatio": {"es": "a causa de", "en": "on account of", "zh": "因為"}}, {"textus": "iram;", "lemma": "ira", "morphologia": "f., sg., acc.", "syntaxis": "Término de la preposición 'ob'", "translatio": {"es": "la ira", "en": "the wrath", "zh": "憤怒"}} ] } ] },
                    { "numerus": 5, "orationes": [ { "original_lat": "multa quoque et bello passus, dum conderet urbem,", "translationes": { "es": "y habiendo padecido también mucho en la guerra, hasta que fundara la ciudad,", "en": "and also having suffered much in war, until he might found a city,", "zh": "而且在戰爭中遭受了許多苦難，直到他能夠建立一座城市，" }, "verba": [ {"textus": "multa", "lemma": "multus", "morphologia": "adj. sust., n., pl., acc.", "syntaxis": "Objeto directo de 'passus'", "translatio": {"es": "muchas cosas", "en": "many things", "zh": "許多"}}, {"textus": "quoque", "lemma": "quoque", "morphologia": "adv.", "syntaxis": "Adverbio", "translatio": {"es": "también", "en": "also", "zh": "也"}}, {"textus": "et", "lemma": "et", "morphologia": "conj.", "syntaxis": "Conjunción (une 'vi superum' y 'bello')", "translatio": {"es": "y", "en": "and", "zh": "和"}}, {"textus": "bello", "lemma": "bellum", "morphologia": "n., sg., abl.", "syntaxis": "Ablativo de tiempo o lugar", "translatio": {"es": "en la guerra", "en": "in war", "zh": "在戰爭中"}}, {"textus": "passus,", "lemma": "patior", "morphologia": "part. dep., m., sg., nom., pf.", "syntaxis": "Participio concertado con 'ille' (sujeto)", "translatio": {"es": "habiendo padecido", "en": "having suffered", "zh": "遭受了"}}, {"textus": "dum", "lemma": "dum", "morphologia": "conj.", "syntaxis": "Conjunción subordinante con valor final", "translatio": {"es": "hasta que", "en": "until", "zh": "直到"}}, {"textus": "conderet", "lemma": "condo", "morphologia": "v., 3ª pers., sg., imperf., subj.", "syntaxis": "Verbo de la subordinada con 'dum'", "translatio": {"es": "fundara", "en": "he might found", "zh": "他能夠建立"}}, {"textus": "urbem,", "lemma": "urbs", "morphologia": "f., sg., acc.", "syntaxis": "Objeto directo de 'conderet'", "translatio": {"es": "la ciudad", "en": "the city", "zh": "城市"}} ] } ] },
                    { "numerus": 6, "orationes": [ { "original_lat": "inferretque deos Latio; genus unde Latinum", "translationes": { "es": "e introdujera los dioses en el Lacio; de donde (proceden) el linaje latino,", "en": "and might bring his gods into Latium; whence the Latin race,", "zh": "並將諸神帶入拉提姆；由此產生了拉丁民族，" }, "verba": [ {"textus": "inferretque", "lemma": "infero", "morphologia": "v., 3ª pers., sg., imperf., subj. (+ -que)", "syntaxis": "Verbo de la subordinada, coordinado con 'conderet'", "translatio": {"es": "e introdujera", "en": "and might bring", "zh": "並帶來"}}, {"textus": "deos", "lemma": "deus", "morphologia": "m., pl., acc.", "syntaxis": "Objeto directo de 'inferret'", "translatio": {"es": "los dioses", "en": "the gods", "zh": "諸神"}}, {"textus": "Latio;", "lemma": "Latium", "morphologia": "n., sg., dat.", "syntaxis": "Dativo de dirección (poético)", "translatio": {"es": "al Lacio", "en": "into Latium", "zh": "進入拉提姆"}}, {"textus": "genus", "lemma": "genus", "morphologia": "n., sg., nom.", "syntaxis": "Sujeto en la cláusula 'unde'", "translatio": {"es": "el linaje", "en": "the race", "zh": "民族"}}, {"textus": "unde", "lemma": "unde", "morphologia": "adv. rel.", "syntaxis": "Adverbio relativo de origen", "translatio": {"es": "de donde", "en": "whence", "zh": "由此"}}, {"textus": "Latinum", "lemma": "Latinus", "morphologia": "adj., n., sg., nom.", "syntaxis": "Adjetivo que modifica a 'genus'", "translatio": {"es": "latino", "en": "Latin", "zh": "拉丁的"}} ] } ] },
                    { "numerus": 7, "orationes": [ { "original_lat": "Albanique patres atque altae moenia Romae.", "translationes": { "es": "y los padres albanos y las murallas de la alta Roma.", "en": "and the Alban fathers and the walls of high Rome.", "zh": "阿爾巴人的祖先以及高貴羅馬的城牆。" }, "verba": [ {"textus": "Albanique", "lemma": "Albanus", "morphologia": "adj., m., pl., nom. (+ -que)", "syntaxis": "Adjetivo que modifica a 'patres'", "translatio": {"es": "y los albanos", "en": "and the Alban", "zh": "和阿爾巴人的"}}, {"textus": "patres", "lemma": "pater", "morphologia": "m., pl., nom.", "syntaxis": "Sujeto en la cláusula 'unde'", "translatio": {"es": "padres", "en": "fathers", "zh": "祖先"}}, {"textus": "atque", "lemma": "atque", "morphologia": "conj.", "syntaxis": "Conjunción copulativa", "translatio": {"es": "y", "en": "and", "zh": "以及"}}, {"textus": "altae", "lemma": "altus", "morphologia": "adj., f., sg., gen.", "syntaxis": "Adjetivo que modifica a 'Romae'", "translatio": {"es": "de la alta", "en": "of high", "zh": "高貴的"}}, {"textus": "moenia", "lemma": "moenia", "morphologia": "n., pl., nom.", "syntaxis": "Sujeto en la cláusula 'unde'", "translatio": {"es": "las murallas", "en": "the walls", "zh": "城牆"}}, {"textus": "Romae.", "lemma": "Roma", "morphologia": "f., sg., gen.", "syntaxis": "Complemento del nombre 'moenia'", "translatio": {"es": "de Roma", "en": "of Rome", "zh": "的羅馬"}} ] } ] },
                    { "numerus": 8, "orationes": [ { "original_lat": "Musa, mihi causas memora, quo numine laeso", "translationes": { "es": "Musa, recuérdame las causas, por qué numen ofendido", "en": "Muse, recall to me the causes, by what divine will harmed", "zh": "繆斯，為我回憶這些原因，為了哪位受辱的神祇" }, "verba": [ {"textus": "Musa,", "lemma": "Musa", "morphologia": "f., sg., voc.", "syntaxis": "Vocativo", "translatio": {"es": "Musa", "en": "Muse", "zh": "繆斯"}}, {"textus": "mihi", "lemma": "ego", "morphologia": "pron., dat.", "syntaxis": "Dativo de interés", "translatio": {"es": "a mí", "en": "to me", "zh": "為我"}}, {"textus": "causas", "lemma": "causa", "morphologia": "f., pl., acc.", "syntaxis": "Objeto directo de 'memora'", "translatio": {"es": "las causas", "en": "the causes", "zh": "原因"}}, {"textus": "memora,", "lemma": "memoro", "morphologia": "v., 2ª pers., sg., pres., imp.", "syntaxis": "Verbo principal (imperativo)", "translatio": {"es": "recuerda", "en": "recall", "zh": "回憶"}}, {"textus": "quo", "lemma": "qui", "morphologia": "adj. interrog., n., sg., abl.", "syntaxis": "Modificador de 'numine'", "translatio": {"es": "por qué", "en": "by what", "zh": "為了哪位"}}, {"textus": "numine", "lemma": "numen", "morphologia": "n., sg., abl.", "syntaxis": "Ablativo de causa", "translatio": {"es": "numen", "en": "divine will", "zh": "神祇"}}, {"textus": "laeso", "lemma": "laedo", "morphologia": "part., n., sg., abl., pf.", "syntaxis": "Participio concertado con 'numine' (Abl. Absoluto)", "translatio": {"es": "ofendido", "en": "harmed", "zh": "受辱的"}} ] } ] },
                    { "numerus": 9, "orationes": [ { "original_lat": "quidve dolens regina deum tot volvere casus", "translationes": { "es": "o doliéndose de qué, la reina de los dioses impulsó a un varón...", "en": "or grieving what, the queen of the gods compelled a man... to undergo so many misfortunes", "zh": "或為了何事而悲痛，眾神之后驅使一個男人...經歷如此多的變故" }, "verba": [ {"textus": "quidve", "lemma": "quis", "morphologia": "pron., n., sg., acc. (+ -ve)", "syntaxis": "Acusativo de relación (Obj. de 'dolens')", "translatio": {"es": "o de qué", "en": "or what", "zh": "或為了何事"}}, {"textus": "dolens", "lemma": "doleo", "morphologia": "part., f., sg., nom., pres.", "syntaxis": "Participio concertado con 'regina'", "translatio": {"es": "doliéndose", "en": "grieving", "zh": "悲痛"}}, {"textus": "regina", "lemma": "regina", "morphologia": "f., sg., nom.", "syntaxis": "Sujeto de 'impulerit' (v. 11)", "translatio": {"es": "la reina", "en": "the queen", "zh": "女王"}}, {"textus": "deum", "lemma": "deus", "morphologia": "m., pl., gen.", "syntaxis": "Complemento del nombre 'regina'", "translatio": {"es": "de los dioses", "en": "of the gods", "zh": "的眾神"}}, {"textus": "tot", "lemma": "tot", "morphologia": "adj., indecl.", "syntaxis": "Modificador de 'casus'", "translatio": {"es": "tantos", "en": "so many", "zh": "如此多"}}, {"textus": "volvere", "lemma": "volvo", "morphologia": "v., inf., pres.", "syntaxis": "Infinitivo en construcción Ac. + Inf. (depende de 'impulerit')", "translatio": {"es": "a arrostrar", "en": "to undergo", "zh": "經歷"}}, {"textus": "casus", "lemma": "casus", "morphologia": "m., pl., acc.", "syntaxis": "Objeto directo de 'volvere'", "translatio": {"es": "azares", "en": "misfortunes", "zh": "變故"}} ] } ] },
                    { "numerus": 10, "orationes": [ { "original_lat": "insignem pietate virum, tot adire labores", "translationes": { "es": "...a un varón insigne por su piedad, a afrontar tantas fatigas.", "en": "...a man distinguished for his piety, to approach so many labors.", "zh": "一個以虔誠著稱的男人，去面對如此多的苦難。" }, "verba": [ {"textus": "insignem", "lemma": "insignis", "morphologia": "adj., m., sg., acc.", "syntaxis": "Adjetivo que modifica a 'virum'", "translatio": {"es": "insigne", "en": "distinguished", "zh": "著稱的"}}, {"textus": "pietate", "lemma": "pietas", "morphologia": "f., sg., abl.", "syntaxis": "Ablativo de causa o respeto", "translatio": {"es": "por su piedad", "en": "for his piety", "zh": "因虔誠"}}, {"textus": "virum,", "lemma": "vir", "morphologia": "m., sg., acc.", "syntaxis": "Sujeto (acusativo) de los infinitivos 'volvere' y 'adire'", "translatio": {"es": "a un varón", "en": "a man", "zh": "一個男人"}}, {"textus": "tot", "lemma": "tot", "morphologia": "adj., indecl.", "syntaxis": "Modificador de 'labores'", "translatio": {"es": "tantas", "en": "so many", "zh": "如此多"}}, {"textus": "adire", "lemma": "adeo", "morphologia": "v., inf., pres.", "syntaxis": "Infinitivo coordinado con 'volvere'", "translatio": {"es": "a afrontar", "en": "to approach", "zh": "去面對"}}, {"textus": "labores", "lemma": "labor", "morphologia": "m., pl., acc.", "syntaxis": "Objeto directo de 'adire'", "translatio": {"es": "fatigas", "en": "labors", "zh": "苦難"}} ] } ] },
                    { "numerus": 11, "orationes": [ { "original_lat": "impulerit. Tantaene animis caelestibus irae?", "translationes": { "es": "¡Tan grandes iras hay en los ánimos celestiales?", "en": "she compelled. Are there such great angers in heavenly spirits?", "zh": "她驅使了。天界的靈魂中竟有如此大的憤怒嗎？" }, "verba": [ {"textus": "impulerit.", "lemma": "impello", "morphologia": "v., 3ª pers., sg., perf., subj.", "syntaxis": "Verbo de la interrogativa indirecta", "translatio": {"es": "impulsó", "en": "she compelled", "zh": "驅使了"}}, {"textus": "Tantaene", "lemma": "tantus", "morphologia": "adj., f., pl., nom. (+ -ne)", "syntaxis": "Atributo de 'irae'", "translatio": {"es": "tan grandes?", "en": "such great?", "zh": "如此大的嗎？"}}, {"textus": "animis", "lemma": "animus", "morphologia": "m., pl., dat.", "syntaxis": "Dativo de posesión", "translatio": {"es": "en los ánimos", "en": "in the spirits", "zh": "在靈魂中"}}, {"textus": "caelestibus", "lemma": "caelestis", "morphologia": "adj., m., pl., dat.", "syntaxis": "Adjetivo que modifica a 'animis'", "translatio": {"es": "celestiales", "en": "heavenly", "zh": "天界的"}}, {"textus": "irae?", "lemma": "ira", "morphologia": "f., pl., nom.", "syntaxis": "Sujeto (de un 'sunt' omitido)", "translatio": {"es": "iras", "en": "angers", "zh": "憤怒"}} ] } ] }
                ]
            }
        };

        document.addEventListener('DOMContentLoaded', () => {
            if (typeof corpus === 'undefined') {
                console.error("Error: El objeto 'corpus' no está definido.");
                return;
            }

            const mainTitleElem = document.getElementById('main-title');
            const subtitleElem = document.getElementById('subtitle');
            const authorElem = document.getElementById('author');
            const contextTitleElem = document.getElementById('context-title');
            const contextContentElem = document.getElementById('context-content');
            const textTitleElem = document.getElementById('text-title');
            const paragrafusContentusElem = document.getElementById('paragrafus-contentus');
            const marginaliaContentusElem = document.getElementById('marginalia-contentus');
            const footerElem = document.getElementById('footer-text');
            const langSwitcher = document.getElementById('language-switcher');
            
            let currentLang = 'es';

            function renderContent() {
                mainTitleElem.textContent = corpus.titulus_principalis;
                subtitleElem.textContent = corpus.titulus_secundarius[currentLang];
                authorElem.textContent = corpus.auctor;
                
                contextTitleElem.textContent = corpus.introductio[currentLang].titulus;
                contextContentElem.innerHTML = corpus.introductio[currentLang].contentus;
                
                textTitleElem.textContent = currentLang === 'es' ? 'Texto y Análisis' : (currentLang === 'en' ? 'Text and Analysis' : '文本與分析');
                
                buildLatinText();
                
                footerElem.textContent = `© ${new Date().getFullYear()} - Análisis Interactivo.`;
            }

            function buildLatinText() {
                paragrafusContentusElem.innerHTML = ''; 
                corpus.textus.capitula.forEach((versus, versusIndex) => {
                    const p = document.createElement('p');
                    p.className = "mb-6 textum-classicum"; 
                    p.innerHTML += `<span class="verse-number mr-2">${versus.numerus}. </span>`; 
                    versus.orationes.forEach((sententia, sententiaIndex) => {
                        const words = sententia.original_lat.split(/(\s+)/);
                        words.forEach(word => {
                            if (!word.trim()) {
                                p.appendChild(document.createTextNode(word));
                                return;
                            }
                            const cleanWord = word.replace(/[,.;:?]/g, '');
                            const verbumData = sententia.verba.find(v => v.textus.replace(/[,.;:?]/g, '') === cleanWord);

                            if (verbumData) {
                                const span = document.createElement('span');
                                span.textContent = word;
                                span.className = 'verbum';
                                span.dataset.versusIndex = versusIndex;
                                span.dataset.sententiaIndex = sententiaIndex;
                                span.dataset.verbumTextus = verbumData.textus;
                                p.appendChild(span);
                            } else {
                                p.appendChild(document.createTextNode(word));
                            }
                        });
                    });
                    paragrafusContentusElem.appendChild(p);
                });
            }

            function showAnalysis(clickedSpan) {
                const { versusIndex, sententiaIndex, verbumTextus } = clickedSpan.dataset;
                const sententiaData = corpus.textus.capitula[versusIndex].orationes[sententiaIndex];
                const verbumData = sententiaData.verba.find(v => v.textus.replace(/[,.;:?]/g, '') === verbumTextus.replace(/[,.;:?]/g, ''));
                if (!verbumData) return;

                const palabraTraducida = verbumData.translatio ? verbumData.translatio[currentLang] : 'N/A';
                const oratioTraducida = sententiaData.translationes[currentLang] || 'N/A';

                marginaliaContentusElem.innerHTML = `
                    <div class="space-y-4">
                        <div>
                            <p class="text-2xl textum-classicum font-bold">${verbumData.textus}</p>
                            <p class="text-lg font-semibold mb-2">${palabraTraducida}</p> 
                            <p class="text-sm"><b>Lema:</b> <i>${verbumData.lemma}</i></p>
                            <p class="text-sm"><b>Morfología:</b> ${verbumData.morphologia}</p>
                            <p class="text-sm"><b>Sintaxis:</b> ${verbumData.syntaxis}</p>
                        </div>
                        <hr class="divider" style="margin: 1rem 0;">
                        <details open>
                            <summary class="font-semibold">Traducción del Verso</summary>
                            <div class="details-content mt-2 text-sm">
                                <p>${oratioTraducida}</p>
                            </div>
                        </details>
                    </div>
                `;
            }
            
            paragrafusContentusElem.addEventListener('click', (e) => {
                if (e.target.classList.contains('verbum')) {
                    document.querySelectorAll('.verbum').forEach(el => el.classList.remove('activus'));
                    e.target.classList.add('activus');
                    showAnalysis(e.target);
                }
            });

            langSwitcher.addEventListener('click', (e) => {
                if (e.target.tagName === 'BUTTON') {
                    const newLang = e.target.dataset.lang;
                    if (newLang !== currentLang) {
                        currentLang = newLang;
                        langSwitcher.querySelectorAll('.lang-btn').forEach(btn => {
                            btn.classList.toggle('active-lang', btn.dataset.lang === newLang);
                        });
                        renderContent();
                        const activeWord = document.querySelector('.verbum.activus');
                        if (activeWord) {
                            showAnalysis(activeWord);
                        } else {
                            marginaliaContentusElem.innerHTML = `<p class="text-[#6d4c35] font-['IM_Fell_English']">Haz clic en una palabra en el texto para ver su análisis.</p>`;
                        }
                    }
                }
            });

            renderContent();
        });
    </script>
</body>
</html>
